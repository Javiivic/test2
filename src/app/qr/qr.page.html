<ion-header>
  <ion-toolbar>
    <ion-icon (click)="volver()" name="arrow-back" class="back"></ion-icon>
    <ion-title class="head">
      Vivo Duoc
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding ion-text-center">
      <ion-card class="qrtar">
        <ion-card-content>
          <ion-item *ngIf="asignaturas && asignaturas.length > 0">
            <ion-label class="labelll">Selecciona asignatura</ion-label>
            <ion-select [(ngModel)]="asignaturaSeleccionada" interface="action-sheet" placeholder="">
              <ion-select-option *ngFor="let asignatura of asignaturas" [value]="asignatura.asigId">
                {{ asignatura.asigName }}
              </ion-select-option>
            </ion-select>
          </ion-item>
          <br>
          <ion-button expand="block" (click)="seleccionarAsignaturaParaEscaneo()" [disabled]="!asignaturaSeleccionada">
            Generar Scanner QR
          </ion-button>
        </ion-card-content>
      </ion-card>

      <div id="qrScanner" style="width: 100%; height: 300px;"></div>
      <ion-text *ngIf="scannedCode">
        <h3 >Código QR escaneado: {{ scannedCode }}</h3>
      </ion-text>
      <ion-text *ngIf="asistenciaRegistrada">
        <h3>Asistencia registrada con éxito.</h3>
      </ion-text>
      <br>
      <br>
  <ion-button expand="block" (click)="registrarAsistencia()" [disabled]="!botonDesbloqueado">
    Registrar Asistencia
  </ion-button>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title class="bottom">
      Scanner QR
    </ion-title>
  </ion-toolbar>
</ion-footer>
